
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>原子列表API: &#8212; Documentation for shared_atomic</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <div class="tex2jax_ignore mathjax_ignore section" id="api">
<h1>原子列表API:<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<p><big>模塊atomic_list</big></p>
<span class="target" id="module-shared_atomic.atomic_list"></span><dl class="py class">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">shared_atomic.atomic_list.</span></span><span class="sig-name descname"><span class="pre">atomic_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">initial</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'singleprocessing'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list" title="Permalink to this definition">¶</a></dt>
<dd><p>set provide atomic operations, the set should be no longer than 8 bytes</p>
<p>constructor to initialize the set,
the set should be no longer than 8 bytes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>initial</strong> – initial value of the set, if the initial value is longer than 8 bytes, please specify the trimming target length, or else it would fail.</p></li>
<li><p><strong>mode</strong> – the mode in which the set will be shared. ‘singleprocessing’ or ‘s’ for single process, ‘multiprocessing’ or ‘m’ for multiprocessing, on windows platform, only singleprocessing is supported, setting it to ‘m’ or ‘multiprocessing’ will be ignored.</p></li>
<li><p><strong>encoding</strong> – , character set, default ‘utf-8’</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.change_mode">
<span class="sig-name descname"><span class="pre">change_mode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newmode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'m'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.change_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch between singleprocessing mode and multiprocessing mode,
the function doesn’t exists on windows, since only single processing mode
is supported on windows platform.
the contents will be copied , other threads/processes would not be aware of the change.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>newmode</strong> – the mode to change to, ‘m’ or ‘multiprocessing’ for multiproessing, ‘s’ or ‘singleprocessing’ for singleprocessing. default ‘m’</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.decode">
<span class="sig-name descname"><span class="pre">decode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bits_in_bytes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.decode" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to decode the bytes to set</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bits_in_bytes</strong> – bytes needs to be decoded</p></li>
<li><p><strong>encoding</strong> – character encoding</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the decoded set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.encode">
<span class="sig-name descname"><span class="pre">encode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_list:</span> <span class="pre">list)</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'int'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;class</span> <span class="pre">'int'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>function to encode the input_set with specific character encoding</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_list</strong> – input set</p></li>
<li><p><strong>encoding</strong> – character encoding</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(data in integer representation, total length in bits)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.get_int">
<span class="sig-name descname"><span class="pre">get_int</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.get_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the whole integer representation from the set,
the whole set would be treated as a large integer</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the integer representation</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.get_list">
<span class="sig-name descname"><span class="pre">get_list</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.get_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the set atomically</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the set</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.int_value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">int_value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.int_value" title="Permalink to this definition">¶</a></dt>
<dd><p>same with get_int</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.list_compare_and_set">
<span class="sig-name descname"><span class="pre">list_compare_and_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.list_compare_and_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare and set atomically, This compares the contents of self
with the contents of i. If equal, the operation is a read-modify-write
operation that writes n into self. If they are not equal,
the operation is a read and the current contents of itself are written into
i.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> – the set to be compared with</p></li>
<li><p><strong>n</strong> – another bytes to be ready to set to self if comparision return True</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>if self is equal to i return True, else return False</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.list_get_and_set">
<span class="sig-name descname"><span class="pre">list_get_and_set</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.list_get_and_set" title="Permalink to this definition">¶</a></dt>
<dd><p>Get and set atomically</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – new data set</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the original set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.list_shift">
<span class="sig-name descname"><span class="pre">list_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">j</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.list_shift" title="Permalink to this definition">¶</a></dt>
<dd><p>Value exchange between 3 pointers in 2 groups atomically,
store i in itself after store itself in j</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>i</strong> – one atomic_set</p></li>
<li><p><strong>j</strong> – another atomic_set</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.list_store">
<span class="sig-name descname"><span class="pre">list_store</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">i</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.list_store" title="Permalink to this definition">¶</a></dt>
<dd><p>Atomically store contents from another set to the this set,
if the other set is different with this one in size , the function will fail.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>i</strong> – another set to store its value to self</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.reencode">
<span class="sig-name descname"><span class="pre">reencode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">newencode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.reencode" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the encoding of the string, if the original size is not enough,
it will elongate the string, if 8 bytes are not enough, it will fail.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>newencode</strong> – new encoding, such as ‘utf-8’, ‘utf-16-le’</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.set_int">
<span class="sig-name descname"><span class="pre">set_int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">integer</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.set_int" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the whole integer representation from the set,
the whole set would be treated as a large integer</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.set_list">
<span class="sig-name descname"><span class="pre">set_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.set_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the value in the set,
if the new data is longer than the original size of the set.
it will expand the set accordingly which would lose atomicy.
the size of the set can be check with self.size</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – input set</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.shift_and_add">
<span class="sig-name descname"><span class="pre">shift_and_add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_prefix:</span> <span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accumulate_length:</span> <span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_length:</span> <span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind:</span> <span class="pre">int)</span> <span class="pre">-&gt;</span> <span class="pre">(&lt;class</span> <span class="pre">'int'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">&lt;class</span> <span class="pre">'int'&gt;</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.shift_and_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to finish the shift and add of the data prefix</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data_prefix</strong> – integer for the data_prefix</p></li>
<li><p><strong>accumulate_length</strong> – total data length in bits accumulated so far</p></li>
<li><p><strong>input_length</strong> – length of the data segment in bits</p></li>
<li><p><strong>kind</strong> – sorts of data</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(data_prefix, accumulate_length)</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="shared_atomic.atomic_list.atomic_list.value">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">value</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">list</span></em><a class="headerlink" href="#shared_atomic.atomic_list.atomic_list.value" title="Permalink to this definition">¶</a></dt>
<dd><p>same with get_list and set_list</p>
</dd></dl>

</dd></dl>

</div>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">shared_atomic</a></h1>



<p class="blurb">多线程多进程共享原子性</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=irvinren&repo=shared_atomic&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="%E5%8E%9F%E5%AD%90API%E7%AF%84%E4%BE%8B.html">原子API範例（多線程多進程混合）:</a></li>
<li class="toctree-l1"><a class="reference internal" href="CTYPES%E7%AF%84%E4%BE%8B.html">ctypes 範例:</a></li>
<li class="toctree-l1"><a class="reference internal" href="CTYPES_API.html">ctypes API 參考</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>


<h3 class="donation">Donate/support</h3>



<p>
<a class="badge" href="https://paypal.me/xiquanren">
<img src="https://img.shields.io/badge/donate-%E2%9D%A4%C2%A0-ff69b4.svg?style=flat" alt="Donate">
</a>
</p>





        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Xiquan Ren <xiquanren@yandex.com>.
      
      |
      <a href="_sources/原子列表API.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>